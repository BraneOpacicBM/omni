version: '3'

services:
  babel:
    build:
      context: .
      dockerfile: Dockerfile
    command: yarn watch:babel
    volumes:
    - .:/code

  mysql:
    image: mysql:8.0.11
    environment:
    - MYSQL_ROOT_PASSWORD=root
    - MYSQL_DATABASE=omni
    ports:
    - 3306:3306
    volumes:
    - mysql-data:/var/lib/mysql

  server:
    build:
      context: .
      dockerfile: Dockerfile
    command: yarn watch:server
    ports:
    - 12831:12831
    volumes:
    - .:/code

  webpack:
    build:
      context: .
      dockerfile: Dockerfile
    command: yarn watch:webpack
    volumes:
    - .:/code

volumes:
  mysql-data:
